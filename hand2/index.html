<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Hand Cursor</title>
    <meta name="description" content="Hand Investigation">
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <link rel="stylesheet" href="style.css" />

    <script>
        AFRAME.registerComponent('collider-check', {  
            dependencies: ['raycaster'],      
            init: function () {
                var el = this.el;
                var defaultColor = el.getAttribute('color').toString();                
                el.addEventListener('raycaster-intersected', function (evt) {
                    el.setAttribute("color","red");
                });

                el.addEventListener('raycaster-intersected-cleared', function (evt) {
                    el.setAttribute("color", defaultColor);
                });
            }
           
        });
    </script>
  </head>

  <body>
    <!-- <video id="webcam" hidden></video>
    <canvas id="canvas" class="border canvasbox"></canvas>
    <div id="updatenote" class="updatenote mt10">loading model ..</div> -->
    <div class="tracker">
        <video id="myvideo"></video>
        <canvas id="canvas" class="border"></canvas>
        <div id="updatenote"><p style="color:green">loading models</p></div>
    </div>
    <div class="data">  
        <div class="hand-1">
          <p id="pred-label">Label: <span>-</span></p>
          <p id="hand-x">X: <span>0</span></p>
          <p id="hand-y">Y: <span>0</span></p>
        </div>
      </div>
    <a-scene 
        vr-mode-ui="enabled: true" 
        webxr="requiredFeatures: hit-test,local-floor;
        optionalFeatures: dom-overlay,unbounded;
        overlayElement: #overlay;"
    >
        <!-- <a-box color="#add8e6" depth="1" height="1" width="1.5"></a-box> -->
        <!-- <a-entity raycaster="objects: .collidable" position="0 1.6 -3" rotation="0 0 45" 
                  animation="property: rotation; to: 0 360 0; loop: true; dur: 10000">
            <a-box color="#808080" depth="1" height="1.5" width="1"></a-box>
        </a-entity> -->

        <a-entity raycaster="objects: .clickable" cursor></a-entity>
        <a-entity id="player" collider-check>
            <a-entity id="blue-box" class="clickable" geometry="primitive: box; width:0.5" position="0 1.6 -3"></a-entity>
            <a-entity class="not-clickable" geometry="primitive: sphere; radius:0.5" position="-1 1.6 -3"></a-entity>
        </a-entity>
        <a-entity position="0 1.6 0">
            <a-entity id="camera-cursor" camera look-controls>
            </a-entity>
        </a-entity>
    </a-scene>
    <div id="overlay">
        <input id="trackbutton" type="button" onclick="toggleVideo()" style="position:absolute; bottom: 20px; left: 20px; width:150px; height: 50px; z-index:100;" value="Video Toggle">    
        <!-- <button id="trackbutton" disabled onclick="toggleVideo()">Video Toggle</button> -->
    </div>
    <script src="https://unpkg.com/carbon-components@latest/scripts/carbon-components.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/handtrackjs/dist/handtrack.min.js"> </script>
    <script src="hand-ar.js"></script>
  </body>
</html>